# DMS API í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

DMS (Digital Message Service) APIì˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ ëª¨ìŒì…ë‹ˆë‹¤. ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ—ï¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
backend/tests/
â”œâ”€â”€ __init__.py                 # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”œâ”€â”€ test_config.py              # í…ŒìŠ¤íŠ¸ ì„¤ì • ë° ê¸°ë³¸ í´ë˜ìŠ¤
â”œâ”€â”€ test_userinfo_api.py        # UserInfo API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_will_api.py            # Will API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_recipients_api.py      # Recipients API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_triggers_api.py        # Triggers API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_dispatchlog_api.py     # DispatchLog API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ run_tests.py                # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ README.md                   # ì´ íŒŒì¼
```

## ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²•

### 1. ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# backend/tests ë””ë ‰í† ë¦¬ì—ì„œ
python run_tests.py
```

### 2. íŠ¹ì • í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì‹¤í–‰

```bash
# UserInfo API í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
python run_tests.py test_userinfo_api

# Will API í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
python run_tests.py test_will_api

# Recipients API í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
python run_tests.py test_recipients_api

# Triggers API í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
python run_tests.py test_triggers_api

# DispatchLog API í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
python run_tests.py test_dispatchlog_api
```

### 3. ê°œë³„ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì§ì ‘ ì‹¤í–‰

```bash
python test_userinfo_api.py
python test_will_api.py
python test_recipients_api.py
python test_triggers_api.py
python test_dispatchlog_api.py
```

### 4. unittest ëª…ë ¹ì–´ ì‚¬ìš©

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python -m unittest discover -s . -p "test_*.py" -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì‹¤í–‰
python -m unittest test_userinfo_api.TestUserInfoAPI -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì‹¤í–‰
python -m unittest test_userinfo_api.TestUserInfoAPI.test_create_user_success -v
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë²”ìœ„

### UserInfo API í…ŒìŠ¤íŠ¸
- âœ… ë¹ˆ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
- âœ… ì‚¬ìš©ì ìƒì„± (ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
- âœ… ì‚¬ìš©ì ì¡°íšŒ (IDë³„, ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°)
- âœ… ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
- âœ… ì‚¬ìš©ì ì‚­ì œ
- âœ… ë‚ ì§œ í˜•ì‹ ê²€ì¦
- âœ… ë°ì´í„° ìœ íš¨ì„± ê²€ì¦

### Will API í…ŒìŠ¤íŠ¸
- âœ… ë¹ˆ ìœ ì–¸ì¥ ëª©ë¡ ì¡°íšŒ
- âœ… ìœ ì–¸ì¥ ìƒì„± (ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
- âœ… ìœ ì–¸ì¥ ì¡°íšŒ (IDë³„, ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°)
- âœ… ìœ ì–¸ì¥ ìˆ˜ì • (ì „ì²´/ë¶€ë¶„ ìˆ˜ì •)
- âœ… ìœ ì–¸ì¥ ì‚­ì œ
- âœ… í•„ìˆ˜ í•„ë“œ ê²€ì¦

### Recipients API í…ŒìŠ¤íŠ¸
- âœ… ë¹ˆ ìˆ˜ì‹ ì ëª©ë¡ ì¡°íšŒ
- âœ… ìˆ˜ì‹ ì ìƒì„± (ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
- âœ… ìˆ˜ì‹ ì ì¡°íšŒ (IDë³„, ìœ ì–¸ì¥ë³„)
- âœ… ìˆ˜ì‹ ì ì •ë³´ ìˆ˜ì •
- âœ… ìˆ˜ì‹ ì ì‚­ì œ
- âœ… ê´€ê³„ ì½”ë“œ ì²˜ë¦¬

### Triggers API í…ŒìŠ¤íŠ¸
- âœ… ë¹ˆ íŠ¸ë¦¬ê±° ëª©ë¡ ì¡°íšŒ
- âœ… íŠ¸ë¦¬ê±° ìƒì„± (ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
- âœ… íŠ¸ë¦¬ê±° ì¡°íšŒ (IDë³„, ì‚¬ìš©ìë³„)
- âœ… íŠ¸ë¦¬ê±° ìˆ˜ì •
- âœ… íŠ¸ë¦¬ê±° ì‚­ì œ
- âœ… íŠ¸ë¦¬ê±° íƒ€ì… ê²€ì¦ (inactivity, date, manual)

### DispatchLog API í…ŒìŠ¤íŠ¸
- âœ… ë¹ˆ ë°œì†¡ ë¡œê·¸ ëª©ë¡ ì¡°íšŒ
- âœ… ë°œì†¡ ë¡œê·¸ ìƒì„± (ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
- âœ… ë°œì†¡ ë¡œê·¸ ì¡°íšŒ (IDë³„, ìœ ì–¸ì¥ë³„, ìˆ˜ì‹ ìë³„)
- âœ… ë°œì†¡ ë¡œê·¸ ìˆ˜ì •
- âœ… ë°œì†¡ ë¡œê·¸ ì‚­ì œ
- âœ… ìƒíƒœ ì½”ë“œ ê²€ì¦ (pending, sent, failed)
- âœ… ë‚ ì§œ ì²˜ë¦¬

## ğŸ”§ í…ŒìŠ¤íŠ¸ ì„¤ì •

### í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤
- **SQLite ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤** ì‚¬ìš© (`sqlite:///:memory:`)
- ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ë…ë¦½ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ í™˜ê²½
- í…ŒìŠ¤íŠ¸ í›„ ìë™ ì •ë¦¬

### í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •
- Flask í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©
- ì‹¤ì œ HTTP ìš”ì²­/ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
- JSON ë°ì´í„° ê²€ì¦
- ìƒíƒœ ì½”ë“œ ê²€ì¦

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì˜ˆì‹œ

```
ğŸ§ª DMS API í…ŒìŠ¤íŠ¸ ì‹œì‘
==================================================
âœ… test_userinfo_api í…ŒìŠ¤íŠ¸ ë¡œë“œ ì™„ë£Œ
âœ… test_will_api í…ŒìŠ¤íŠ¸ ë¡œë“œ ì™„ë£Œ
âœ… test_recipients_api í…ŒìŠ¤íŠ¸ ë¡œë“œ ì™„ë£Œ
âœ… test_triggers_api í…ŒìŠ¤íŠ¸ ë¡œë“œ ì™„ë£Œ
âœ… test_dispatchlog_api í…ŒìŠ¤íŠ¸ ë¡œë“œ ì™„ë£Œ

test_create_user_success (test_userinfo_api.TestUserInfoAPI) ... ok
test_create_will_success (test_will_api.TestWillAPI) ... ok
...

==================================================
í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½
==================================================
ì‹¤í–‰ëœ í…ŒìŠ¤íŠ¸: 45
ì‹¤íŒ¨: 0
ì—ëŸ¬: 0

ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!
```

## ğŸ› ï¸ í…ŒìŠ¤íŠ¸ ì¶”ê°€í•˜ê¸°

ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ë ¤ë©´:

1. `test_config.py`ì˜ `BaseTestCase`ë¥¼ ìƒì†
2. `setUp()` ë©”ì„œë“œì—ì„œ í•„ìš”í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„
3. `test_`ë¡œ ì‹œì‘í•˜ëŠ” ë©”ì„œë“œ ì‘ì„±
4. `self.assertEqual()`, `self.assertTrue()` ë“±ìœ¼ë¡œ ê²€ì¦
5. `run_tests.py`ì˜ `test_modules` ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€

### ì˜ˆì‹œ:
```python
class TestNewAPI(BaseTestCase):
    def test_new_feature(self):
        response = self.client.get('/api/new-endpoint')
        self.assertEqual(response.status_code, 200)
        
        data = json.loads(response.data)
        self.assertTrue(data['success'])
```

## ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **í…ŒìŠ¤íŠ¸ ë°ì´í„° ê²©ë¦¬**: ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤
2. **ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš© ê¸ˆì§€**: í…ŒìŠ¤íŠ¸ëŠ” í•­ìƒ ì¸ë©”ëª¨ë¦¬ DB ì‚¬ìš©
3. **ì™¸ë¶€ ì˜ì¡´ì„± ìµœì†Œí™”**: ëª¨í‚¹ì´ë‚˜ ìŠ¤í… ì‚¬ìš© ê¶Œì¥
4. **í…ŒìŠ¤íŠ¸ ì´ë¦„ ëª…í™•í™”**: í…ŒìŠ¤íŠ¸ ëª©ì ì´ ëª…í™•íˆ ë“œëŸ¬ë‚˜ëŠ” ì´ë¦„ ì‚¬ìš©

## ğŸ“š ì¶”ê°€ ì •ë³´

- í…ŒìŠ¤íŠ¸ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ìë™ ì‹¤í–‰
- ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ: 90% ì´ìƒ
- ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ëŠ” ìµœì†Œ ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ í•„ìš”