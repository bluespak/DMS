          {/* íŠ¸ë¦¬ê±° ëª¨ë‹¬ */}
          {showTriggerModal && currentTriggerUser && (
            <div className="modal-overlay">
              <div className="trigger-modal">
                <div className="modal-header">
                  <h3>â° {currentTriggerUser.FirstName} {currentTriggerUser.LastName}ì˜ íŠ¸ë¦¬ê±° ê´€ë¦¬</h3>
                  <button 
                    onClick={closeTriggerModal}
                    className="close-button"
                  >
                    âœ•
                  </button>
                </div>
                
                <div className="modal-content">
                  {/* íŠ¸ë¦¬ê±° ì´ë ¥ ì„¹ì…˜ */}
                  <div className="trigger-history">
                    <div className="trigger-history-header">
                      <h4>ğŸ“‹ íŠ¸ë¦¬ê±° ì´ë ¥</h4>
                      <button 
                        onClick={() => {
                          setShowTriggerForm(!showTriggerForm);
                          if (!showTriggerForm) {
                            setEditingTrigger({
                              user_id: currentTriggerUser.user_id,
                              trigger_type: '',
                              trigger_date: '',
                              status: 'pending'
                            });
                          }
                        }}
                        className={`add-trigger-button ${showTriggerForm ? 'active' : ''}`}
                        title={showTriggerForm ? 'í¼ ë‹«ê¸°' : 'ìƒˆ íŠ¸ë¦¬ê±° ì¶”ê°€'}
                      >
                        {showTriggerForm ? 'âœ•' : 'â•'}
                      </button>
                    </div>
                    
                    {userTriggers.length > 0 ? (
                      <div className="trigger-list">
                        {userTriggers.map((trigger, index) => (
                          <div key={trigger.trigger_id || index} className="trigger-item">
                            <div className="trigger-info">
                              <div className="trigger-header">
                                <span className="trigger-type">
                                  ğŸ“‹ {trigger.trigger_type?.toUpperCase() || 'MANUAL'}
                                </span>
                                <span className="trigger-date">
                                  {trigger.trigger_date ? new Date(trigger.trigger_date).toLocaleDateString('ko-KR') : 'ë‚ ì§œ ì—†ìŒ'}
                                </span>
                                {trigger.status === 'pending' && (
                                  <button 
                                    onClick={() => startEditTrigger(trigger)}
                                    className="edit-trigger-button"
                                    title="íŠ¸ë¦¬ê±° í¸ì§‘"
                                  >
                                    âœï¸
                                  </button>
                                )}
                              </div>
                              <div className="trigger-status">
                                ìƒíƒœ: <span className={`status ${trigger.status?.toLowerCase()}`}>
                                  {trigger.status === 'completed' ? 'ì™„ë£Œ' : 
                                   trigger.status === 'pending' ? 'ëŒ€ê¸°ì¤‘' : 
                                   trigger.status === 'failed' ? 'ì‹¤íŒ¨' : trigger.status}
                                </span>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    ) : (
                      <div className="no-triggers">
                        <p>ğŸ” ë“±ë¡ëœ íŠ¸ë¦¬ê±°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                      </div>
                    )}
                  </div>

                  {/* ìƒˆ íŠ¸ë¦¬ê±° ì¶”ê°€/ìˆ˜ì • í¼ */}
                  {showTriggerForm && (
                    <div className="trigger-form-container">
                      <div className="trigger-form">
                        <div className="trigger-form-header">
                          <h4>
                            {editingTrigger?.trigger_id ? 'âœï¸ íŠ¸ë¦¬ê±° ìˆ˜ì •' : 'â• ìƒˆ íŠ¸ë¦¬ê±° ì¶”ê°€'}
                          </h4>
                          <button 
                            onClick={() => {
                              setShowTriggerForm(false);
                              setEditingTrigger(null);
                            }}
                            className="close-form-button"
                            title="í¼ ë‹«ê¸°"
                          >
                            âœ•
                          </button>
                        </div>
                        
                        <div className="form-row">
                          <div className="form-group">
                            <label>íŠ¸ë¦¬ê±° íƒ€ì…:</label>
                            <select 
                              name="trigger_type"
                              value={editingTrigger?.trigger_type || ''}
                              onChange={handleTriggerInputChange}
                              className="form-control"
                            >
                              <option value="">íƒ€ì… ì„ íƒ</option>
                              <option value="email">ğŸ“§ ì´ë©”ì¼</option>
                              <option value="sms">ğŸ“± SMS</option>
                              <option value="notification">ğŸ”” ì•Œë¦¼</option>
                            </select>
                          </div>
                          <div className="form-group">
                            <label>íŠ¸ë¦¬ê±° ë‚ ì§œ:</label>
                            <input 
                              type="date"
                              name="trigger_date"
                              value={editingTrigger?.trigger_date || ''}
                              onChange={handleTriggerInputChange}
                              className="form-control"
                            />
                          </div>
                        </div>
                        <div className="form-group">
                          <label>ìƒíƒœ:</label>
                          <select 
                            name="status"
                            value={editingTrigger?.status || 'pending'}
                            onChange={handleTriggerInputChange}
                            className="form-control"
                          >
                            <option value="pending">ëŒ€ê¸°ì¤‘</option>
                            <option value="completed">ì™„ë£Œ</option>
                            <option value="failed">ì‹¤íŒ¨</option>
                          </select>
                        </div>
                        
                        <div className="form-buttons">
                          <button 
                            onClick={saveTrigger}
                            className="save-button"
                            disabled={!editingTrigger?.trigger_type || !editingTrigger?.trigger_date}
                          >
                            {editingTrigger?.trigger_id ? 'ìˆ˜ì • ì™„ë£Œ' : 'ì¶”ê°€'}
                          </button>
                          <button 
                            onClick={() => {
                              setShowTriggerForm(false);
                              setEditingTrigger(null);
                            }}
                            className="cancel-button"
                          >
                            ì·¨ì†Œ
                          </button>
                        </div>
                      </div>
                    </div>
                  )}
                </div>
                
                <div className="modal-footer">
                  <button 
                    onClick={closeTriggerModal}
                    className="cancel-button"
                  >
                    ë‹«ê¸°
                  </button>
                </div>
              </div>
            </div>
          )}